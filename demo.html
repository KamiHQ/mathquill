<!DOCTYPE html>
<html>
  <head>
    <title>MathQuill 0.2a Demo</title>
    <style type="text/css">
      body{
        width:6.5in;
        margin:0 auto;
        font-family:"Times New Roman",serif;
      }
      .math{
        font-family:"Courier New",sans-serif;
        display: inline-block;
      }
      a#codecogslink{
        text-decoration: none;
      }
      a#codecogslink:link span,a#codecogslink:visited span{
        text-decoration: underline;
      }
      img#codecogs{
        vertical-align:middle;
        border: none;
      }
    </style>
    <script type="text/javascript" src="vendor/jquery.min.js"></script>
    <script type="text/javascript" src="build/mathquill.js"></script>
    <script type="text/javascript">
      var LatexImages = false;
      $(function(){
        var editingSource = false, latexMath = $('#editable-math').change(function()
        {
          var latex = $(this).mathquill('latex');
          //location.hash = '#'+latex; //extremely performance-crippling in Chrome for some reason
          if(!editingSource)
            //$('#latex-source').val(latex);
            $('#latex-source').text(latex);
          if(!LatexImages)
            return;
          latex = encodeURIComponent(latex);
          $('#codecogs').attr('src','http://latex.codecogs.com/gif.latex?'+latex).parent().attr('href','http://latex.codecogs.com/gif.latex?'+latex);
        }).focus();
        if(location.hash && location.hash.length > 1){
          latexMath.mathquill('latex', decodeURIComponent(location.hash.slice(1)));
          latexMath.cursor.appendTo(latexMath);
        }
        $('#latex-source').focus(function(){
          editingSource = true;
        }).blur(function(){
          editingSource = false;
        }).keypress(function()
        {
          var textarea = $(this), oldtext = textarea.val();
          setTimeout(function()
          {
            var newtext = textarea.val();
            if(newtext != oldtext)
              latexMath.mathquill('latex', newtext);
          },0);
        });
      });
    </script>
    <link rel="stylesheet" type="text/css" href="mathquill.css">
  </head>
  <body>
    <h2><a href="http://laughinghan.github.com/mathquill">MathQuill 0.2&alpha;</a></h2>
    <p>by Jay and <a href="http://github.com/laughinghan">Han (laughinghan)</a></p>
    <p>This gets automatically turned into pretty math: <span class="math mathquill-embedded-latex">e^{i\pi}+1=0</span></p>
    <p><button onclick="$(this).text('$(this).next().mathquill(\'revert\')').next().mathquill('editable').focus(); var orig = arguments.callee; this.onclick = function(){  $(this).text('$(this).next().mathquill(\'editable\').focus()').next().mathquill('revert'); this.onclick = orig;$};">$(this).next().mathquill('editable').focus()</button>
       <span class="math">\frac{d}{dx}\sqrt{x}=\frac{d}{dx}x^{\frac{1}{2}}=\frac{1}{2}x^{-\frac{1}{2}}=\frac{1}{2\sqrt{x}}</span></p>
    <p>MathQuill editable math: <span id="editable-math" class="mathquill-editable"></span></p>
    <p><small>(You can start by trying <code>x^2</code> or <code>3/4</code> and using the arrow keys to move around. <a href="javascript:void(0)" onclick="var more = arguments.callee; this.onclick = function(){ var less = arguments.callee; this.onclick = more; $(this).html('more &raquo;').prev().remove(); }; $(this).html('less &laquo;').before('<span>You can also try using the tab key instead of arrow keys, which gets you &quot;out&quot; of a command, and <code>a_n</code> for subscripts. Numerous LaTeX-style commands preceded by a backslash, such as <code>\\theta</code>[space or enter], are supported as well. Another example is <code>\\sqrt</code>[space or enter]<code>2</code>.</span> ');">more &raquo;</a>)</small></p>
    <p>Latex source: <textarea id="latex-source" style="width:80%;vertical-align:top"></textarea></p>
    <p><button onclick="LatexImages = true; $('#editable-math').change(); $(this).remove()">Enable</button> Code Cogs: <a id="codecogslink"><img id="codecogs"> <span>Link</span></a></p>
  </body>
</html>
